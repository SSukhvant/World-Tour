# ========================================
# SEO & PERFORMANCE OPTIMIZATION
# ========================================

# Enable Mod Rewrite
RewriteEngine On
RewriteBase /worldtour4u/

# URL Rewriting for Better SEO (MUST BE BEFORE .php removal)
RewriteRule ^packages-view/([a-zA-Z0-9-]+)/?$ packages-view.php?id=$1 [QSA,L]
RewriteRule ^blog-view/([a-z0-9-]+)/?$ blog-view.php?slug=$1 [QSA,L]
RewriteRule ^blog-category/([a-z0-9-]+)/?$ blog-category.php?id=$1 [QSA,L]

# Remove .php extension (AFTER specific URL rewrites)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/worldtour4u/(packages-view|blog-view|blog-category)/ [NC]
RewriteRule ^([^\.]+)/?$ $1.php [NC,L]

# ========================================
# GZIP COMPRESSION (Performance)
# ========================================
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/x-javascript
</IfModule>

# ========================================
# BROWSER CACHING (Performance)
# ========================================
<IfModule mod_expires.c>
  ExpiresActive On
  
  # Cache images for 1 year
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/x-icon "access plus 1 year"
  
  # Cache CSS for 1 month
  ExpiresByType text/css "access plus 1 month"
  
  # Cache JavaScript for 1 month
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType text/javascript "access plus 1 month"
  
  # Cache fonts for 1 year
  ExpiresByType font/ttf "access plus 1 year"
  ExpiresByType font/otf "access plus 1 year"
  ExpiresByType font/woff "access plus 1 year"
  ExpiresByType font/woff2 "access plus 1 year"
  
  # Default expiration: 1 week
  ExpiresDefault "access plus 1 week"
</IfModule>

# ========================================
# HTTP HEADERS FOR SEO
# ========================================
<IfModule mod_headers.c>
  # Add Security Headers
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set X-XSS-Protection "1; mode=block"
  Header set Referrer-Policy "strict-origin-when-cross-origin"
  
  # Cache Control Headers
  <FilesMatch "\.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|otf)$">
    Header set Cache-Control "max-age=31536000, public"
  </FilesMatch>
  
  <FilesMatch "\.(php)$">
    Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
  </FilesMatch>
</IfModule>

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php82” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php82___lsphp .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit
